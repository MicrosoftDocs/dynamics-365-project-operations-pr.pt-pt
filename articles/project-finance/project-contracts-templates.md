---
title: Sincronizar os contratos do projetos e os projetos diretamente do Project Service Automation para o Finance and Operations
description: Este tópico descreve o modelo e as tarefas subjacentes que são utilizados para sincronizar os contratos de projeto e os projetos diretamente do Microsoft Dynamics 365 Project Service Automation para o Dynamics 365 Finance.
author: KimANelson
manager: AnnBe
ms.date: 09/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: 57fe4ae8-6ee9-442d-9933-d525b5415db8
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: b914a56b306639253a8cd3b7caa754da175b6df2
ms.sourcegitcommit: 8c786230ef2a497280885b827162561776e2eb00
ms.translationtype: HT
ms.contentlocale: pt-PT
ms.lasthandoff: 03/24/2020
ms.locfileid: "3754486"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance-and-operations"></a><span data-ttu-id="ff6b7-103">Sincronizar os contratos do projetos e os projetos diretamente do Project Service Automation para o Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="ff6b7-103">Synchronize project contracts and projects directly from Project Service Automation to Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="ff6b7-104">Este tópico descreve o modelo e as tarefas subjacentes que são utilizados para sincronizar os contratos de projeto e os projetos diretamente do Dynamics 365 Project Service Automation para o Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="ff6b7-105">Se estiver a utilizar o Enterprise edition 7.3.0, tem de instalar o KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="ff6b7-106">Fluxo de dados para o Project Service Automation para o Finance</span><span class="sxs-lookup"><span data-stu-id="ff6b7-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="ff6b7-107">Antes de poder utilizar a solução de integração do Project Service Automation para o Finance, dever estar familiarizado com a funcionalidade Integração de Dados do Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="ff6b7-108">A solução de integração do Project Service Automation para Finance utiliza a funcionalidade Integração de Dados para sincronizar os dados entre instâncias do Project Service Automation e do Finance.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="ff6b7-109">O modelo de integração disponível com a funcionalidade de integração de Dados permite o fluxo de dados sobre contratos de projetos, projetos, itens de contrato do projeto e marcos de itens de contrato do projeto do Project Service Automation para o Finance.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="ff6b7-110">A seguinte ilustração mostra como os dados são sincronizados entre o Project Service Automation e o Finance.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="ff6b7-111">[![Fluxo de dados para a integração do Project Service Automation com o Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="ff6b7-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="ff6b7-112">Modelos e tarefas</span><span class="sxs-lookup"><span data-stu-id="ff6b7-112">Templates and tasks</span></span>

<span data-ttu-id="ff6b7-113">Para aceder aos modelos disponíveis, no centro de administração do Microsoft Power Apps, selecione **Projetos** e, em seguida, no canto superior direito, selecione **Novo projeto** para selecionar modelos públicos.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="ff6b7-114">Os modelos seguintes e as tarefas subjacentes são utilizados para sincronizar os contratos do projeto e os projetos do Project Service Automation para o Finance:</span><span class="sxs-lookup"><span data-stu-id="ff6b7-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="ff6b7-115">Integração com Dynamics 365 Project Service Automation v2.x</span><span class="sxs-lookup"><span data-stu-id="ff6b7-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="ff6b7-116">**Nome do modelo na Integração de dados:** Projetos e contratos (PSA para Fin and Ops)</span><span class="sxs-lookup"><span data-stu-id="ff6b7-116">**Name of the template in Data integration:** Projects and contracts (PSA to Fin and Ops)</span></span>
- <span data-ttu-id="ff6b7-117">**Nome das tarefas no projeto:**</span><span class="sxs-lookup"><span data-stu-id="ff6b7-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="ff6b7-118">Contratos de projeto do PSA para Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="ff6b7-118">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="ff6b7-119">Projetos do PSA para Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="ff6b7-119">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="ff6b7-120">Itens de contrato de projeto do PSA para Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="ff6b7-120">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="ff6b7-121">Marcos de itens de contrato de projeto do PSA para Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="ff6b7-121">Project contract line milestones PSA to Fin and Ops</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="ff6b7-122">Integração com Dynamics 365 Project Service Automation v3.x</span><span class="sxs-lookup"><span data-stu-id="ff6b7-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="ff6b7-123">Existe uma alteração de esquema no Project Service Automation que afeta o modelo de marco de item de contrato do Projeto e a utilização da versão v2 do modelo é necessária para integrar a Project Service Automation v3.x com o Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="ff6b7-124">**Nome do modelo na Integração de dados:** Projetos e Contratos (PSA 3.x para Fin and Ops) - v2</span><span class="sxs-lookup"><span data-stu-id="ff6b7-124">**Name of the template in Data integration:** Projects and Contracts (PSA 3.x to Fin and Ops) - v2</span></span>
- <span data-ttu-id="ff6b7-125">**Nome das tarefas no projeto:**</span><span class="sxs-lookup"><span data-stu-id="ff6b7-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="ff6b7-126">Contratos de projeto do PSA para Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="ff6b7-126">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="ff6b7-127">Projetos do PSA para Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="ff6b7-127">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="ff6b7-128">Itens de contrato de projeto do PSA para Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="ff6b7-128">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="ff6b7-129">Marcos de itens de contrato de projeto do PSA para Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="ff6b7-129">Project contract line milestones PSA to Fin and Ops</span></span>

<span data-ttu-id="ff6b7-130">Antes de poder ocorrer a sincronização dos contratos de projeto e dos projetos, é necessário sincronizar as contas.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="ff6b7-131">Conjunto de entidades</span><span class="sxs-lookup"><span data-stu-id="ff6b7-131">Entity set</span></span>

| <span data-ttu-id="ff6b7-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="ff6b7-132">Project Service Automation</span></span>       | <span data-ttu-id="ff6b7-133">Finanças</span><span class="sxs-lookup"><span data-stu-id="ff6b7-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="ff6b7-134">Encomendas</span><span class="sxs-lookup"><span data-stu-id="ff6b7-134">Orders</span></span>                           | <span data-ttu-id="ff6b7-135">Entidade de integração para o contrato de projeto</span><span class="sxs-lookup"><span data-stu-id="ff6b7-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="ff6b7-136">Projetos</span><span class="sxs-lookup"><span data-stu-id="ff6b7-136">Projects</span></span>                         | <span data-ttu-id="ff6b7-137">Entidade de integração para o projeto</span><span class="sxs-lookup"><span data-stu-id="ff6b7-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="ff6b7-138">Linhas de encomenda</span><span class="sxs-lookup"><span data-stu-id="ff6b7-138">Order lines</span></span>                      | <span data-ttu-id="ff6b7-139">Entidade de integração para o item de contrato de projeto</span><span class="sxs-lookup"><span data-stu-id="ff6b7-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="ff6b7-140">Marcos do item de contrato do projeto</span><span class="sxs-lookup"><span data-stu-id="ff6b7-140">Project contract line milestones</span></span> | <span data-ttu-id="ff6b7-141">Entidade de integração para o marco do item de contrato de projeto</span><span class="sxs-lookup"><span data-stu-id="ff6b7-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="ff6b7-142">Fluxo de entidades</span><span class="sxs-lookup"><span data-stu-id="ff6b7-142">Entity flow</span></span>

<span data-ttu-id="ff6b7-143">Os contratos do projeto são geridos no Project Service Automation e sincronizados com o Finance como contratos de projeto.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="ff6b7-144">Como parte do modelo de integração, pode definir a fonte de integração no Finance para o contrato do projeto.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="ff6b7-145">Os projetos de Tempo e material e os projetos de Preço fixo são geridos no Project Service Automation e sincronizados com o Finance como projetos.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-145">Time and material project and Fixed price projects are managed in Project Service Automation, and they are synchronized to Finance as projects.</span></span> <span data-ttu-id="ff6b7-146">Como parte da integração do modelo, pode definir a fonte de integração no Finance para o projeto.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-146">As part of the template integration, you can set the integration source in Finance for the project.</span></span>

<span data-ttu-id="ff6b7-147">Os itens de contrato são geridos no Project Service Automation e sincronizados com o Finance como regras de faturação de contratos.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-147">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="ff6b7-148">Se o método de faturação diferir do tipo de projeto predefinido, a sincronização atualiza o tipo de projeto para o projeto da item de contrato e o grupo de projetos.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-148">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="ff6b7-149">Os marcos do item de contrato são geridos no Project Service Automation e sincronizados com o Finance como marcos de regra de faturação de contrato.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-149">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="ff6b7-150">Solução de integração do Project Service Automation para Finance</span><span class="sxs-lookup"><span data-stu-id="ff6b7-150">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="ff6b7-151">O campo **ID do contrato de projeto** está disponível na página **Contratos de projeto**.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-151">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="ff6b7-152">Este campo foi convertido numa chave natural e exclusiva para apoiar a integração.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-152">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="ff6b7-153">Quando é criado um novo contrato de projeto, se um valor **ID de contrato de projeto** ainda não existir, é gerido automaticamente ao utilizar uma sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-153">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="ff6b7-154">O valor é composto por **ORD** seguido por uma sequência de números incrementais e, em seguida, um sufixo de seis caracteres.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-154">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="ff6b7-155">Segue-se um exemplo: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-155">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="ff6b7-156">O campo **Número de projeto** está disponível na página **Projetos**.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-156">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="ff6b7-157">Este campo foi convertido numa chave natural e exclusiva para apoiar a integração.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-157">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="ff6b7-158">Quando é criado um novo projeto, se um valor **Número de projeto** ainda não existir, é gerido automaticamente ao utilizar uma sequência numérica.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-158">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="ff6b7-159">O valor é composto por **PRJ** seguido por uma sequência de números incrementais e, em seguida, um sufixo de seis caracteres.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-159">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="ff6b7-160">Segue-se um exemplo: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-160">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="ff6b7-161">Quando a solução de integração Project Service Automation para Finance é aplicada, um script de atualização define o campo **ID do contrato de projeto** para os contratos de projeto existentes e o campo **Número de Projeto** para os projetos existentes no Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-161">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="ff6b7-162">Pré-requisitos e configuração do mapeamento</span><span class="sxs-lookup"><span data-stu-id="ff6b7-162">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="ff6b7-163">Antes de poder ocorrer a sincronização dos contratos de projeto e dos projetos, é necessário sincronizar as contas.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-163">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="ff6b7-164">No seu conjunto de ligações, adicione um mapeamento de campos chave de integração para **msdyn\_organizationalunits** para **msdyn\_name \[Nome\]**.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-164">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="ff6b7-165">Primeiro, poderá ter de adicionar um projeto ao conjunto de ligações.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-165">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="ff6b7-166">Para mais informações, consulte [Integrar dados no Common Data Service para Aplicações](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="ff6b7-166">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="ff6b7-167">No seu conjunto de ligações, adicione um mapeamento de campos chave de integração para **msdyn\_projects** para **msdynce\_projectnumber \[Número de Projeto\]**.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-167">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="ff6b7-168">Primeiro, poderá ter de adicionar um projeto ao conjunto de ligações.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-168">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="ff6b7-169">Para mais informações, consulte [Integrar dados no Common Data Service para Aplicações](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="ff6b7-169">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="ff6b7-170">**SourceDataID** para contratos de projeto e projetos pode ser atualizado para um valor diferente ou removido do mapeamento.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-170">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="ff6b7-171">O valor do modelo predefinido é **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-171">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="ff6b7-172">O mapeamento **PaymentTerms** tem de ser atualizado para refletir os termos de pagamento válidos no Finance.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-172">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="ff6b7-173">Também pode remover o mapeamento da tarefa do projeto.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-173">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="ff6b7-174">O mapa de valores predefinidos tem valores predefinidos para os dados de demonstração.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-174">The default value map has default values for demo data.</span></span> <span data-ttu-id="ff6b7-175">A tabela seguinte mostra os valores no Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-175">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="ff6b7-176">Value</span><span class="sxs-lookup"><span data-stu-id="ff6b7-176">Value</span></span> | <span data-ttu-id="ff6b7-177">Descrição</span><span class="sxs-lookup"><span data-stu-id="ff6b7-177">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="ff6b7-178">5</span><span class="sxs-lookup"><span data-stu-id="ff6b7-178">1</span></span>     | <span data-ttu-id="ff6b7-179">Líq. a 30 Dias</span><span class="sxs-lookup"><span data-stu-id="ff6b7-179">Net 30</span></span>        |
    | <span data-ttu-id="ff6b7-180">2</span><span class="sxs-lookup"><span data-stu-id="ff6b7-180">2</span></span>     | <span data-ttu-id="ff6b7-181">2% a 10 Dias, Líq. a 30 Dias</span><span class="sxs-lookup"><span data-stu-id="ff6b7-181">2% 10, Net 30</span></span> |
    | <span data-ttu-id="ff6b7-182">3</span><span class="sxs-lookup"><span data-stu-id="ff6b7-182">3</span></span>     | <span data-ttu-id="ff6b7-183">Líq. a 45 Dias</span><span class="sxs-lookup"><span data-stu-id="ff6b7-183">Net 45</span></span>        |
    | <span data-ttu-id="ff6b7-184">4</span><span class="sxs-lookup"><span data-stu-id="ff6b7-184">4</span></span>     | <span data-ttu-id="ff6b7-185">Líq. a 60 Dias</span><span class="sxs-lookup"><span data-stu-id="ff6b7-185">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="ff6b7-186">Power Query</span><span class="sxs-lookup"><span data-stu-id="ff6b7-186">Power Query</span></span>

<span data-ttu-id="ff6b7-187">Tem de utilizar o Microsoft Power Query para Excel para filtrar os dados se se verificarem as seguintes condições:</span><span class="sxs-lookup"><span data-stu-id="ff6b7-187">You must use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="ff6b7-188">Tem ordens de venda no Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-188">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="ff6b7-189">Tem várias unidades organizacionais no Project Service Automation e estas unidades organizacionais serão mapeadas para várias entidades jurídicas no Finance.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-189">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="ff6b7-190">Se tiver de utilizar o Power Query, siga estas diretrizes:</span><span class="sxs-lookup"><span data-stu-id="ff6b7-190">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="ff6b7-191">O modelo Projetos e contratos (PSA para Fin and Ops) tem um filtro predefinido que inclui apenas as ordens de venda do tipo **Item de trabalho (msdyn\_ordertype = 192350001)**.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-191">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="ff6b7-192">Este filtro ajuda a garantir que os contratos de projeto não são criados para as ordens de venda no Finance.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-192">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="ff6b7-193">Se criar o seu próprio modelo, terá de adicionar este filtro.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-193">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="ff6b7-194">Tem de criar um filtro do Power Query que inclua apenas as organizações contratuais que devem ser sincronizadas com a entidade jurídica do conjunto de ligações de integração.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-194">You must create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="ff6b7-195">Por exemplo, os contratos de projeto que tem com a unidade organizacional contratual Contoso US devem ser sincronizados com a entidade jurídica USSI, mas os contratos de projeto que tem com a unidade organizacional contratual Contoso Global devem ser sincronizados com a entidade jurídica USMF.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-195">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="ff6b7-196">Se não adicionar este filtro ao seu mapeamento de tarefas, todos os contratos de projeto serão sincronizados com a entidade jurídica que está definida para o conjunto de ligações, independentemente da unidade organizacional contratual.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-196">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="ff6b7-197">Mapeamento de modelos na Integração de dados</span><span class="sxs-lookup"><span data-stu-id="ff6b7-197">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="ff6b7-198">Os campos **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState** e **AddressZipCode** não estão incluídos no mapeamento predefinido para contratos de projeto.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-198">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="ff6b7-199">Pode adicionar os mapeamentos se necessitar que estes dados sejam sincronizados para contratos de projeto.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-199">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="ff6b7-200">Os campos **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** e **ProjectType** não estão incluídos no mapeamento predefinido para projetos.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-200">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="ff6b7-201">Pode adicionar os mapeamentos se necessitar que estes dados sejam sincronizados para projetos.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-201">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="ff6b7-202">As seguintes ilustrações mostram exemplos dos mapeamentos de tarefas do modelo na Integração de Dados.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-202">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="ff6b7-203">O mapeamento mostra as informações do campo que serão sincronizadas do Project Service Automation para Finance.</span><span class="sxs-lookup"><span data-stu-id="ff6b7-203">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="ff6b7-204">[![Mapeamento de modelos](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="ff6b7-204">[![Template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="ff6b7-205">[![Mapeamento de modelos](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="ff6b7-205">[![Template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="ff6b7-206">[![Mapeamento de modelos](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="ff6b7-206">[![Template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="ff6b7-207">[![Mapeamento de modelos](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="ff6b7-207">[![Template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="ff6b7-208">Mapeamento de marcos de item de contrato de projeto no modelo Projetos e Contratos (PSA 3.x para Dynamics) - v2:</span><span class="sxs-lookup"><span data-stu-id="ff6b7-208">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="ff6b7-209">[![Mapeamento de modelos](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="ff6b7-209">[![Template mapping](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
